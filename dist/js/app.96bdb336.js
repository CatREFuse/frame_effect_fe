(function(t){function e(e){for(var o,a,s=e[0],c=e[1],u=e[2],d=0,g=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&g.push(n[a][0]),n[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(g.length)g.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],o=!0,a=1;a<r.length;a++){var c=r[a];0!==n[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var o={},n={app:0},i=[];function a(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"1274d13d"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,o){r=n[t]=[e,o]}));e.push(r[2]=o);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=a(t);var u=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(d);var r=n[t];if(0!==r){if(r){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",u.name="ChunkLoadError",u.type=o,u.request=i,r[1](u)}n[t]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(r,o,function(e){return t[e]}.bind(null,o));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0a3c":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("7a23");function n(t,e,r,n,i,a){var s=Object(o["resolveComponent"])("router-view");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(s)])}var i=Object(o["withScopeId"])("data-v-6ea4c4dd");Object(o["pushScopeId"])("data-v-6ea4c4dd");var a={class:"home"},s=Object(o["createVNode"])("h1",null,"拖动交互测试区",-1);Object(o["popScopeId"])();var c=i((function(t,e,r,n,i,c){var u=Object(o["resolveComponent"])("Drag"),d=Object(o["resolveComponent"])("el-switch");return Object(o["openBlock"])(),Object(o["createBlock"])("div",a,[s,Object(o["createVNode"])(u,{"is-snapping":i.isSnapping,"show-grid":i.showGrid},null,8,["is-snapping","show-grid"]),Object(o["createVNode"])(d,{class:"switch",modelValue:i.isSnapping,"onUpdate:modelValue":e[1]||(e[1]=function(t){return i.isSnapping=t}),"active-text":"网格吸附开","inactive-text":"网格吸附关","active-color":"green"},null,8,["modelValue"]),Object(o["createVNode"])(d,{class:"switch",modelValue:i.showGrid,"onUpdate:modelValue":e[2]||(e[2]=function(t){return i.showGrid=t}),"active-text":"网格显示开","inactive-text":"网格显示关","active-color":"green"},null,8,["modelValue"])])})),u=(r("c96a"),Object(o["withScopeId"])("data-v-3dd355cd"));Object(o["pushScopeId"])("data-v-3dd355cd");var d={class:"notice-box",key:"box1"},l={style:{display:"flex","flex-direction":"column","align-items":"center"}},g=Object(o["createVNode"])("em",{style:{"margin-top":"1rem"}},"可以通过 Shift 切换网格大小",-1),f={style:{"margin-top":"0rem"}};Object(o["popScopeId"])();var h=u((function(t,e,r,n,i,a){var s=Object(o["resolveComponent"])("el-switch");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])("div",{class:{canvas:!0,"small-grid":i.small&&r.showGrid,"big-grid":!i.small&&r.showGrid,"no-grid":!r.showGrid,grab:i.isDraging},onMousemove:e[2]||(e[2]=Object(o["withModifiers"])((function(t){return a.draging(t)}),["prevent"])),onMouseup:e[3]||(e[3]=Object(o["withModifiers"])((function(t){return a.dragEnd(t)}),["prevent"]))},[Object(o["createVNode"])("div",{class:{box:!0,grab:i.isDraging},onMousedown:e[1]||(e[1]=Object(o["withModifiers"])((function(t){return a.dragStart(t)}),["prevent"])),style:{left:"".concat(i.boxPosition.x,"px"),top:"".concat(i.boxPosition.y,"px"),backgroundColor:"".concat(i.isInTarget?"#7EBF50":"#282A3A")}},null,38),Object(o["createVNode"])(o["Transition"],{name:"fade"},{default:u((function(){return[i.showNotice?(Object(o["openBlock"])(),Object(o["createBlock"])("div",d," ✌️完成目标，用时 "+Object(o["toDisplayString"])(a.period)+" ms，即将进行下一轮... ",1)):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])("div",{class:"target",style:{left:"".concat(i.targetPosition.x,"px"),top:"".concat(i.targetPosition.y,"px")}},null,4)],34),Object(o["createVNode"])("div",l,[Object(o["createVNode"])("p",null,"坐标为: "+Object(o["toDisplayString"])(i.boxPosition.x)+" "+Object(o["toDisplayString"])(i.boxPosition.y),1),g,Object(o["createVNode"])("p",f,"网格大小 "+Object(o["toDisplayString"])(i.small?"80px":"160px"),1),Object(o["createVNode"])(s,{style:{margin:"0.5rem"},modelValue:i.small,"onUpdate:modelValue":e[4]||(e[4]=function(t){return i.small=t}),"active-text":"小网格","inactive-text":"大网格"},null,8,["modelValue"])])],64)})),p=(r("7f17"),r("f3fc"),r("6573")),b=r.n(p),m=r("3835"),v=r("ade3");r("159b"),r("d81d");function O(t,e){for(var r=[],o=0;o<t;o++)0!=o&&r.push(o*e-60),r.push(o*e),o==t-1&&r.push((o+1)*e-60);return console.log(r),r}var x=O(6,160),j=O(4,160),y=O(12,80),S=O(8,80);function P(t,e){var r=0,o=1e6;return e.forEach((function(e){Math.abs(t-e)<=o&&(o=Math.abs(t-e),r=e)})),r}var w={props:{isSnapping:{type:Boolean,default:!0},showGrid:{type:Boolean,default:!0}},data:function(){return{small:!1,isDraging:!1,dragBuffer:Object(v["a"])({cursorXOnStart:0,cursorYOnStart:0,boxXOnStart:0,boxYOnStart:0,boxPositionX:0},"boxPositionX",0),boxPosition:{x:160,y:160},targetPosition:{x:640,y:320},isInTarget:!1,showNotice:!1,isResetting:!1,isInTiming:!1,time:{begin:0,end:0}}},computed:{period:function(){return this.time.end-this.time.begin}},methods:{dragStart:function(t){if(!this.isResetting){if(!this.isInTiming){var e=new Date;this.time.begin=e.getTime()}this.isInTiming=!0;var r=B(t,".canvas"),o=Object(m["a"])(r,2);this.dragBuffer.cursorXOnStart=o[0],this.dragBuffer.cursorYOnStart=o[1];var n=[this.boxPosition.x,this.boxPosition.y];this.dragBuffer.boxXOnStart=n[0],this.dragBuffer.boxYOnStart=n[1],this.isDraging=!0}},draging:function(t){if(!this.isResetting&&0!=this.isDraging){var e=B(t,".canvas"),r=Object(m["a"])(e,2),o=r[0],n=r[1],i=o-this.dragBuffer.cursorXOnStart,a=n-this.dragBuffer.cursorYOnStart;this.isSnapping?(this.dragBuffer.boxPositionX=i+this.dragBuffer.boxXOnStart,this.dragBuffer.boxPositionY=a+this.dragBuffer.boxYOnStart,this.small?(this.boxPosition.x=P(this.dragBuffer.boxPositionX,y),this.boxPosition.y=P(this.dragBuffer.boxPositionY,S)):(this.boxPosition.x=P(this.dragBuffer.boxPositionX,x),this.boxPosition.y=P(this.dragBuffer.boxPositionY,j))):(this.boxPosition.x=i+this.dragBuffer.boxXOnStart,this.boxPosition.y=a+this.dragBuffer.boxYOnStart),Math.abs(this.boxPosition.x-this.targetPosition.x)<=4&&Math.abs(this.boxPosition.y-this.targetPosition.y)<=4?this.isInTarget=!0:this.isInTarget=!1}},dragEnd:function(t){var e=this;if(!this.isResetting&&0!=this.isDraging){var r=new Date;this.time.end=r.getTime(),this.isDraging=!1;var o=[0,0];if(this.cursorXOnStart=o[0],this.cursorYOnStart=o[1],this.isInTarget){var n=[this.targetPosition.x,this.targetPosition.y];this.boxPosition.x=n[0],this.boxPosition.y=n[1],this.$emit("accomplish"),b.a.success({message:"完成目标，用时 ".concat(this.period," ms，即将进行下一轮..."),type:"success"}),this.isResetting=!0,setTimeout((function(){e.resetDrag()}),1200)}}},resetDrag:function(){for(var t in this.dragBuffer)this.dragBuffer[t]=0;this.boxPosition={x:160,y:160},this.showNotice=!1,this.isInTarget=!1,this.isResetting=!1,this.isInTiming=!1;var e=r("f367");console.log(e);var o=Math.floor(Math.random()*e.length),n=e[o];console.log(o,n);var i=[n.start[0],n.start[1],n.target[0],n.target[1]].map((function(t){return parseInt(t)})),a=Object(m["a"])(i,4),s=a[0],c=a[1],u=a[2],d=a[3];this.boxPosition={x:s,y:c},this.targetPosition={x:u,y:d}},pushShift:function(){this.small=!0},releaseShift:function(){this.small=!1}},created:function(){var t=this;document.addEventListener("keydown",(function(e){"Shift"==e.key&&t.pushShift()})),document.addEventListener("keyup",(function(e){"Shift"==e.key&&t.releaseShift()}))},mounted:function(){this.resetDrag()}};function B(t,e){var r=document.querySelector(e).getBoundingClientRect().top,o=document.querySelector(e).getBoundingClientRect().left,n=t.clientX-o,i=t.clientY-r;return[n,i]}r("fc9b");w.render=h,w.__scopeId="data-v-3dd355cd";var V=w,k={name:"Home",components:{Drag:V},data:function(){return{isSnapping:!1,showGrid:!0}}};r("67fe");k.render=c,k.__scopeId="data-v-6ea4c4dd";var I=k,N={name:"App",components:{Home:I}};r("d95d");N.render=n;var D=N,T=(r("d3b7"),r("3ca3"),r("ddb0"),r("6c02")),M=[{path:"/",name:"Home",component:I},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],X=Object(T["a"])({history:Object(T["b"])(),routes:M}),Y=X,_=r("5502"),C=Object(_["a"])({state:{},mutations:{},actions:{},modules:{}}),E=(r("7dd6"),r("46bd")),G=r.n(E),R=(r("c69f"),r("3ef0")),A=r.n(R),L=function(t){t.use(G.a,{locale:A.a})},q=Object(o["createApp"])(D);L(q),q.use(C).use(Y).mount("#app")},"67fe":function(t,e,r){"use strict";r("ceba")},c343:function(t,e,r){},c69f:function(t,e,r){},ceba:function(t,e,r){},d95d:function(t,e,r){"use strict";r("0a3c")},f367:function(t){t.exports=JSON.parse('[{"start":["0 ","0 "],"target":["400 ","240 "]},{"start":["0 ","160 "],"target":["400 ","400 "]},{"start":["0 ","320 "],"target":["400 ","560 "]},{"start":["160 ","0 "],"target":["560 ","240 "]},{"start":["160","160"],"target":["560 ","400 "]},{"start":["160 ","320 "],"target":["560 ","560 "]},{"start":["320 ","0 "],"target":["720 ","240 "]},{"start":["320 ","160 "],"target":["720 ","400 "]},{"start":["320 ","320 "],"target":["720 ","560 "]},{"start":["480 ","0 "],"target":["880 ","240 "]},{"start":["480 ","160 "],"target":["880 ","400 "]},{"start":["480 ","320 "],"target":["880 ","560 "]},{"start":["640 ","0 "],"target":["240 ","240 "]},{"start":["640 ","160 "],"target":["240 ","400 "]},{"start":["640 ","320 "],"target":["240 ","560 "]},{"start":["800 ","0 "],"target":["400 ","240 "]},{"start":["800 ","160 "],"target":["400","400"]},{"start":["800 ","320 "],"target":["400 ","560 "]},{"start":["420 ","260 "],"target":["20 ","20 "]},{"start":["420 ","420 "],"target":["20 ","180 "]},{"start":["420 ","580 "],"target":["20 ","340 "]},{"start":["580 ","260 "],"target":["180 ","20 "]},{"start":["580 ","420 "],"target":["180","180 "]},{"start":["580 ","580 "],"target":["180 ","340 "]},{"start":["740 ","260 "],"target":["340 ","20 "]},{"start":["740 ","420 "],"target":["340 ","180 "]},{"start":["740 ","580 "],"target":["340 ","340 "]},{"start":["900 ","260 "],"target":["500 ","20 "]},{"start":["900 ","420 "],"target":["500 ","180 "]},{"start":["900 ","580 "],"target":["500 ","340 "]},{"start":["260 ","260 "],"target":["660 ","20 "]},{"start":["260 ","420 "],"target":["660 ","180 "]},{"start":["260 ","580 "],"target":["660 ","340 "]},{"start":["420 ","260 "],"target":["820 ","20 "]},{"start":["420","420 "],"target":["820 ","180 "]},{"start":["420 ","580 "],"target":["820 ","340 "]}]')},fc9b:function(t,e,r){"use strict";r("c343")}});
//# sourceMappingURL=app.96bdb336.js.map