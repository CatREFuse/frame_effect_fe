(function(t){function e(e){for(var a,o,i=e[0],c=e[1],g=e[2],u=0,l=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&l.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(l.length)l.shift()();return s.push.apply(s,g||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},s=[];function o(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"1274d13d"}[t]+".js"}function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise((function(e,a){r=n[t]=[e,a]}));e.push(r[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=o(t);var g=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var r=n[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;g.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",g.name="ChunkLoadError",g.type=a,g.request=s,r[1](g)}n[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],g=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=g;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0a3c":function(t,e,r){},"0b01":function(t,e,r){},"399f":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("7a23");function n(t,e,r,n,s,o){var i=Object(a["resolveComponent"])("router-view");return Object(a["openBlock"])(),Object(a["createBlock"])("div",null,[Object(a["createVNode"])(i)])}var s=Object(a["withScopeId"])("data-v-69d6a848");Object(a["pushScopeId"])("data-v-69d6a848");var o={class:"home"},i=Object(a["createVNode"])("h1",null,"拖动交互测试区",-1);Object(a["popScopeId"])();var c=s((function(t,e,r,n,s,c){var g=Object(a["resolveComponent"])("Drag"),u=Object(a["resolveComponent"])("el-switch");return Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[i,Object(a["createVNode"])(g,{"is-snapping":s.isSnapping,"show-grid":s.showGrid,"target-on-big":s.targetOnBig},null,8,["is-snapping","show-grid","target-on-big"]),Object(a["createVNode"])(u,{class:"switch",modelValue:s.isSnapping,"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.isSnapping=t}),"active-text":"网格吸附开","inactive-text":"网格吸附关","active-color":"green"},null,8,["modelValue"]),Object(a["createVNode"])(u,{class:"switch",modelValue:s.showGrid,"onUpdate:modelValue":e[2]||(e[2]=function(t){return s.showGrid=t}),"active-text":"网格显示开","inactive-text":"网格显示关","active-color":"green"},null,8,["modelValue"]),Object(a["createVNode"])(u,{class:"switch",modelValue:s.targetOnBig,"onUpdate:modelValue":e[3]||(e[3]=function(t){return s.targetOnBig=t}),"active-text":"目标在大网格","inactive-text":"目标在小网格","active-color":"green"},null,8,["modelValue"])])})),g=(r("c96a"),Object(a["withScopeId"])("data-v-26d875bd"));Object(a["pushScopeId"])("data-v-26d875bd");var u={class:"notice-box",key:"box1"},d={style:{display:"flex","flex-direction":"column","align-items":"center"}},l=Object(a["createVNode"])("em",{style:{"margin-top":"1rem"}},"可以通过 Shift 切换网格大小",-1),f={style:{"margin-top":"0rem"}};Object(a["popScopeId"])();var h=g((function(t,e,r,n,s,o){var i=Object(a["resolveComponent"])("el-switch");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])("div",{class:{canvas:!0,"small-grid":s.small&&r.showGrid,"big-grid":!s.small&&r.showGrid,"no-grid":!r.showGrid,grab:s.isDraging},onMousemove:e[2]||(e[2]=Object(a["withModifiers"])((function(t){return o.draging(t)}),["prevent"])),onMouseup:e[3]||(e[3]=Object(a["withModifiers"])((function(t){return o.dragEnd(t)}),["prevent"]))},[Object(a["createVNode"])("div",{class:{box:!0,grab:s.isDraging},onMousedown:e[1]||(e[1]=Object(a["withModifiers"])((function(t){return o.dragStart(t)}),["prevent"])),style:{left:"".concat(s.boxPosition.x,"px"),top:"".concat(s.boxPosition.y,"px"),backgroundColor:"".concat(s.isInTarget?"green":"goldenrod")}},null,38),Object(a["createVNode"])(a["Transition"],{name:"fade"},{default:g((function(){return[s.showNotice?(Object(a["openBlock"])(),Object(a["createBlock"])("div",u," ✌️完成目标，用时 "+Object(a["toDisplayString"])(o.period)+" ms，即将进行下一轮... ",1)):Object(a["createCommentVNode"])("",!0)]})),_:1}),Object(a["createVNode"])("div",{class:"target",style:{left:"".concat(s.targetPosition.x,"px"),top:"".concat(s.targetPosition.y,"px")}},null,4)],34),Object(a["createVNode"])("div",d,[l,Object(a["createVNode"])("p",f,"网格大小 "+Object(a["toDisplayString"])(s.small?"80px":"160px"),1),Object(a["createVNode"])(i,{style:{margin:"0.5rem"},modelValue:s.small,"onUpdate:modelValue":e[4]||(e[4]=function(t){return s.small=t}),"active-text":"小网格","inactive-text":"大网格"},null,8,["modelValue"])])],64)})),p=(r("7f17"),r("f3fc"),r("6573")),b=r.n(p),m=r("3835"),v=r("ade3");r("159b"),r("d81d");function O(t,e){for(var r=[],a=0;a<e;a++)0!=a&&r.push(a*e-60),r.push(a*e),a==e-1&&r.push(a*e+60);return r}var x=O(6,160),j=O(4,160),y=O(12,80),S=O(8,80);function w(t,e){var r=0,a=1e6;return e.forEach((function(e){Math.abs(t-e)<=a&&(a=Math.abs(t-e),r=e)})),r}var P={props:{isSnapping:{type:Boolean,default:!0},showGrid:{type:Boolean,default:!0},targetOnBig:{type:Boolean,default:!1}},data:function(){return{small:!1,isDraging:!1,dragBuffer:Object(v["a"])({cursorXOnStart:0,cursorYOnStart:0,boxXOnStart:0,boxYOnStart:0,boxPositionX:0},"boxPositionX",0),boxPosition:{x:160,y:160},targetPosition:{x:640,y:320},isInTarget:!1,showNotice:!1,isResetting:!1,isInTiming:!1,time:{begin:0,end:0}}},computed:{period:function(){return this.time.end-this.time.begin}},methods:{dragStart:function(t){if(!this.isResetting){if(!this.isInTiming){var e=new Date;this.time.begin=e.getTime()}this.isInTiming=!0;var r=B(t,".canvas"),a=Object(m["a"])(r,2);this.dragBuffer.cursorXOnStart=a[0],this.dragBuffer.cursorYOnStart=a[1];var n=[this.boxPosition.x,this.boxPosition.y];this.dragBuffer.boxXOnStart=n[0],this.dragBuffer.boxYOnStart=n[1],this.isDraging=!0,console.log("start")}},draging:function(t){if(!this.isResetting&&0!=this.isDraging){var e=B(t,".canvas"),r=Object(m["a"])(e,2),a=r[0],n=r[1],s=a-this.dragBuffer.cursorXOnStart,o=n-this.dragBuffer.cursorYOnStart;this.isSnapping?(this.dragBuffer.boxPositionX=s+this.dragBuffer.boxXOnStart,this.dragBuffer.boxPositionY=o+this.dragBuffer.boxYOnStart,this.small?(this.boxPosition.x=w(this.dragBuffer.boxPositionX,y),this.boxPosition.y=w(this.dragBuffer.boxPositionY,S)):(this.boxPosition.x=w(this.dragBuffer.boxPositionX,x),this.boxPosition.y=w(this.dragBuffer.boxPositionY,j))):(this.boxPosition.x=s+this.dragBuffer.boxXOnStart,this.boxPosition.y=o+this.dragBuffer.boxYOnStart),Math.abs(this.boxPosition.x-this.targetPosition.x)<=4&&Math.abs(this.boxPosition.y-this.targetPosition.y)<=4?this.isInTarget=!0:this.isInTarget=!1}},dragEnd:function(t){var e=this;if(!this.isResetting&&0!=this.isDraging){var r=new Date;this.time.end=r.getTime(),this.isDraging=!1;var a=[0,0];if(this.cursorXOnStart=a[0],this.cursorYOnStart=a[1],this.isInTarget){var n=[this.targetPosition.x,this.targetPosition.y];this.boxPosition.x=n[0],this.boxPosition.y=n[1],this.$emit("accomplish"),b.a.success({message:"完成目标，用时 ".concat(this.period," ms，即将进行下一轮..."),type:"success"}),this.isResetting=!0,setTimeout((function(){e.resetDrag()}),1200)}console.log("end")}},resetDrag:function(){for(var t in this.dragBuffer)this.dragBuffer[t]=0;this.boxPosition={x:160,y:160},this.showNotice=!1,this.isInTarget=!1,this.isResetting=!1,this.isInTiming=!1,console.log(this.targetOnBig);var e=this.targetOnBig?r("cdfe"):r("7784");console.log(e);var a=Math.floor(Math.random()*e.length),n=e[a];console.log(a,n);var s=[n.start[0],n.start[1],n.target[0],n.target[1]].map((function(t){return parseInt(t)})),o=Object(m["a"])(s,4),i=o[0],c=o[1],g=o[2],u=o[3];this.boxPosition={x:i,y:c},this.targetPosition={x:g,y:u}},pushShift:function(){this.small=!0},releaseShift:function(){this.small=!1}},created:function(){var t=this;document.addEventListener("keydown",(function(e){"Shift"==e.key&&t.pushShift()})),document.addEventListener("keyup",(function(e){"Shift"==e.key&&t.releaseShift()}))},mounted:function(){this.resetDrag()},watch:{targetOnBig:function(t,e){this.resetDrag()}}};function B(t,e){var r=document.querySelector(e).getBoundingClientRect().top,a=document.querySelector(e).getBoundingClientRect().left,n=t.clientX-a,s=t.clientY-r;return[n,s]}r("92b9");P.render=h,P.__scopeId="data-v-26d875bd";var V=P,N={name:"Home",components:{Drag:V},data:function(){return{isSnapping:!1,showGrid:!0,targetOnBig:!0}}};r("6419");N.render=c,N.__scopeId="data-v-69d6a848";var k=N,I={name:"App",components:{Home:k}};r("d95d");I.render=n;var T=I,D=(r("d3b7"),r("3ca3"),r("ddb0"),r("6c02")),M=[{path:"/",name:"Home",component:k},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],X=Object(D["a"])({history:Object(D["b"])(),routes:M}),Y=X,_=r("5502"),C=Object(_["a"])({state:{},mutations:{},actions:{},modules:{}}),E=(r("7dd6"),r("46bd")),G=r.n(E),R=(r("c69f"),r("3ef0")),A=r.n(R),J=function(t){t.use(G.a,{locale:A.a})},L=Object(a["createApp"])(T);J(L),L.use(C).use(Y).mount("#app")},6419:function(t,e,r){"use strict";r("0b01")},7784:function(t){t.exports=JSON.parse('[{"start":["0","0"],"target":["240","80"]},{"start":["0","0"],"target":["80","240"]},{"start":["80","0"],"target":["320","80"]},{"start":["80","0"],"target":["160","240"]},{"start":["160","0"],"target":["400","80"]},{"start":["160","0"],"target":["240","240"]},{"start":["240","0"],"target":["320","240"]},{"start":["320","0"],"target":["400","240"]},{"start":["0","20"],"target":["240","100"]},{"start":["0","20"],"target":["80","260"]},{"start":["80","20"],"target":["320","100"]},{"start":["80","20"],"target":["160","260"]},{"start":["160","20"],"target":["400","100"]},{"start":["160","20"],"target":["240","260"]},{"start":["240","20"],"target":["320","260"]},{"start":["320","20"],"target":["400","260"]},{"start":["0","80"],"target":["240","160"]},{"start":["80","80"],"target":["320","160"]},{"start":["160","80"],"target":["400","160"]},{"start":["0","100"],"target":["240","180"]},{"start":["80","100"],"target":["320","180"]},{"start":["160","100"],"target":["400","180"]},{"start":["0","160"],"target":["240","240"]},{"start":["80","160"],"target":["320","240"]},{"start":["160","160"],"target":["400","240"]},{"start":["0","180"],"target":["240","200"]},{"start":["80","180"],"target":["320","200"]},{"start":["160","180"],"target":["400","200"]},{"start":["240","80"],"target":["0","0"]},{"start":["80","240"],"target":["0","0"]},{"start":["320","80"],"target":["80","0"]},{"start":["160","240"],"target":["80","0"]},{"start":["400","80"],"target":["160","0"]},{"start":["240","240"],"target":["160","0"]},{"start":["320","240"],"target":["240","0"]},{"start":["400","240"],"target":["320","0"]},{"start":["240","100"],"target":["0","20"]},{"start":["80","260"],"target":["0","20"]},{"start":["320","100"],"target":["80","20"]},{"start":["160","260"],"target":["80","20"]},{"start":["400","100"],"target":["160","20"]},{"start":["240","260"],"target":["160","20"]},{"start":["320","260"],"target":["240","20"]},{"start":["400","260"],"target":["320","20"]},{"start":["240","160"],"target":["0","80"]},{"start":["320","160"],"target":["80","80"]},{"start":["400","160"],"target":["160","80"]},{"start":["240","180"],"target":["0","100"]},{"start":["320","180"],"target":["80","100"]},{"start":["400","180"],"target":["160","100"]},{"start":["240","240"],"target":["0","160"]},{"start":["320","240"],"target":["80","160"]},{"start":["400","240"],"target":["160","160"]},{"start":["240","200"],"target":["0","180"]},{"start":["320","200"],"target":["80","180"]},{"start":["400","200"],"target":["160","180"]},{"start":["20","0"],"target":["260","80"]},{"start":["20","0"],"target":["100","260"]},{"start":["100","0"],"target":["340","80"]},{"start":["100","0"],"target":["180","240"]},{"start":["180","0"],"target":["420","80"]},{"start":["180","0"],"target":["260","240"]},{"start":["260","0"],"target":["340","240"]},{"start":["340","0"],"target":["360","240"]},{"start":["20","20"],"target":["260","100"]},{"start":["20","20"],"target":["100","20"]},{"start":["100","20"],"target":["340","20"]},{"start":["100","20"],"target":["180","20"]},{"start":["180","20"],"target":["420","20"]},{"start":["180","20"],"target":["260","20"]},{"start":["260","20"],"target":["340","20"]},{"start":["340","20"],"target":["420","20"]},{"start":["20","80"],"target":["260","160"]},{"start":["100","80"],"target":["340","160"]},{"start":["180","80"],"target":["420","160"]},{"start":["20","100"],"target":["260","180"]},{"start":["100","100"],"target":["340","180"]},{"start":["180","100"],"target":["420","180"]},{"start":["20","160"],"target":["260","240"]},{"start":["100","160"],"target":["340","240"]},{"start":["180","160"],"target":["420","240"]},{"start":["20","180"],"target":["260","200"]},{"start":["100","180"],"target":["340","200"]},{"start":["180","180"],"target":["420","200"]},{"start":["260","80"],"target":["20","0"]},{"start":["100","260"],"target":["20","0"]},{"start":["340","80"],"target":["100","0"]},{"start":["180","240"],"target":["100","0"]},{"start":["420","80"],"target":["180","0"]},{"start":["260","240"],"target":["180","0"]},{"start":["340","240"],"target":["260","0"]},{"start":["360","240"],"target":["340","0"]},{"start":["260","100"],"target":["20","20"]},{"start":["100","20"],"target":["20","20"]},{"start":["340","20"],"target":["100","20"]},{"start":["180","20"],"target":["100","20"]},{"start":["420","20"],"target":["180","20"]},{"start":["260","20"],"target":["180","20"]},{"start":["340","20"],"target":["260","20"]},{"start":["420","20"],"target":["340","20"]},{"start":["260","160"],"target":["20","80"]},{"start":["340","160"],"target":["100","80"]},{"start":["420","160"],"target":["180","80"]},{"start":["260","180"],"target":["20","100"]},{"start":["340","180"],"target":["100","100"]},{"start":["420","180"],"target":["180","100"]},{"start":["260","240"],"target":["20","160"]},{"start":["340","240"],"target":["100","160"]},{"start":["420","240"],"target":["180","160"]},{"start":["260","200"],"target":["20","180"]},{"start":["340","200"],"target":["100","180"]},{"start":["420","200"],"target":["180","180"]}]')},"92b9":function(t,e,r){"use strict";r("399f")},c69f:function(t,e,r){},cdfe:function(t){t.exports=JSON.parse('[{"start":["80","80"],"target":["320","160"]},{"start":["80","180"],"target":["320","100"]},{"start":["340","80"],"target":["100","160"]},{"start":["340","180"],"target":["100","100"]}]')},d95d:function(t,e,r){"use strict";r("0a3c")}});
//# sourceMappingURL=app.0667e89f.js.map